<%= form_for(@book, :html=>{:multipart=>true, :class => 'form-horizontal'}) do |f| %>
  
  <% if @book.errors.any? %>
    <div class="alert alert-error alert-block">
      <h4><%= pluralize(@book.errors.count, "error") %> prohibited this book from being saved:</h4>
      <br/>

      <ul>
      <% @book.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row">

    <div class="span6">

      <div class="control-group">
        <%= f.label :title, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :title %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :category, :class => 'control-label' %>
        <div class="controls">
          <%= f.select :category_id, Category.all.map {|c| [c.name, c.id]}, {:prompt => 'Select category'} %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :collection, :class => 'control-label' %>
        <div class="controls">
          <%= f.select :collection_id, Collection.all.map {|c| [c.name, c.id]}, {:prompt => 'Select collection'} %>
        </div>
      </div>
       <div class="control-group">
        <%= f.label :author, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :author %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :year, :class => 'control-label' %>
        <div class="controls">
          <%= f.number_field :year %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :reading_date, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :reading_date %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :pages, :class => 'control-label' %>
        <div class="controls">
          <%= f.number_field :pages %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :editorial, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :editorial %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :isbn, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :isbn %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :url, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :url %>
        </div>
      </div>

    </div>


    <div class="span6">
      <div class="control-group">
        <%= f.label :cover, :class => 'control-label' %>
        <div class="controls">
          <%= f.file_field :cover %>
        </div>
        <% if not @book.cover.nil?  %>
          <%= image_tag("/books/#{@book.id}/cover", :alt => "Image") %>
          <br />
        <% end %>
      </div>
    </div>

  </div>

  <div class="row">
    <div class="span12">
      <div class="control-group" style="vertical-align: bottom">
        <%= f.label :abstract, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_area :abstract, :rows => "10", :style => "width: 90%" %>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="span12">
      <div class="form-actions">
        <%= f.submit :class => 'btn btn-primary pull-right' %>
      </div>
    </div>
  </div>
  
<% end %>
