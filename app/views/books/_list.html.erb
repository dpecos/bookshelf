<div class="row">
  <div class="col-md-12">

    <ul class="nav nav-pills pull-right" style="margin-top: -50px">
      <li>
        <% if @shelf_view %>
           <%= link_to 'Plain', url_for(params.except(:shelf)) %>
        <% else %>
           <%= link_to 'Shelf', url_for(params.merge(:shelf => true)) %>
        <% end %>
      </li>
    </ul>
  </div>
</div>

<% if @shelf_view.present? %>

<div id="shelf">
   <% @books.each do |book| %>
      <div class="book">
         <% if not book.cover.nil?  %>
            <%= image_tag("/books/#{book.id}/cover", :alt => "Image", :class => "cover") %>
         <% end %>
         <div class="details">
            <span><%= link_to book.title, book %></span>
            <span><%= (book.collection.present?) ? link_to(book.collection.name, book.collection) : "" %><span/>
            <span><%= link_to book.category.name, book.category %></span>
            <span><%= (book.author.present?) ? link_to(book.author, url_for(params.merge(:author => book.author))) : ""  %> 
               <%= (book.year.present?) ? link_to("(#{book.year})", url_for(params.merge(:year => book.year))) : "" %></span>
         </div>
      </div>
   <% end %>
</div>

<% else %>

<div class="row">
  <div class="col-md-12">

    <table class="table table-striped">
      <thead>
        <tr>
          <th width="150px">Category</th>
          <th width="400px">Title</th>
          <th width="150px">Collection</th>
          <th width="200px">Author</th>
          <th>Year</th>
          <th>C</th>
          <th>A</th>
          <th width="100px"></th>
        </tr>
      </thead>
      <tbody>
      <% @books.each do |book| %>
        <tr>
          <td class="center"><%= link_to book.category.name, book.category %></td>
          <td><%= link_to book.title, book %></td>
          <td><%= (book.collection.present?) ? link_to(book.collection.name, book.collection) : "" %></td>
          <td><%= (book.author.present?) ? link_to(book.author, url_for(params.merge(:author => book.author))) : ""  %></td>
          <td class="right"><%= (book.year.present?) ? link_to(book.year, url_for(params.merge(:year => book.year))) : "" %></td>
          <td class="center"><% if book.cover.present? %>&#10004;<% end %></td>
          <td class="center"><% if book.abstract.present? %>&#10004;<% end %></td>
          <td>
             <%= link_to book, :class => "btn btn-xs" do %>
               <span class="glyphicon glyphicon-book"></span>
             <% end %>
             <%= link_to edit_book_path(book), :class => "btn btn-xs" do %>
               <span class="glyphicon glyphicon-pencil"></span>
             <% end %>
             <%= link_to book, :method => :delete, :data => { :confirm => 'Are you sure?' }, :class => "btn btn-xs" do %>
               <span class="glyphicon glyphicon-trash"></span>
             <% end %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>

  </div>
</div>

<% end %>
